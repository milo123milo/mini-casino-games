# Animation System

The Animation System provides visual feedback and enhances the user experience through smooth animations for various game elements and transitions.

## Overview

Animations are implemented using LVGL's animation framework, which allows for creating smooth transitions between different states of UI elements. The application uses animations extensively for game elements, notifications, and transitions.

## Animation Definitions

The animations are defined in `ui.c` and are generated by SquareLine Studio. Each animation function typically takes two parameters:
- `lv_obj_t *TargetObject`: The UI object to animate
- `int delay`: Optional delay before starting the animation

### Main Animation Types

#### General Animations:
- `itemAppear_Animation()`: Makes an item appear with a fade-in effect
- `fadeInAfterLogo_Animation()`: Fades in elements after the logo animation
- `removeBlack_Animation()`: Fades out a black overlay
- `introLogo_Animation()`: Animates the intro logo
- `underLogo_Animation()`: Animates elements under the logo

#### Game-Specific Animations:
- `jackpotAnim_Animation()`: Special animation for jackpot wins in Slots
- `diceAppear_Animation()`: Animation for dice appearing in Dice Roll
- `blackjacklogo_Animation()`: Animation for the Blackjack logo
- `cardPullAnim_Animation()`: Animation for dealing a card in Blackjack
- `cardFlip_Animation()`: Animation for flipping a card in Blackjack
- `frameAppear_Animation()`: Animation for UI frames appearing
- `animPointsBox_Animation()`: Animation for the points display box
- `bjButtonsAnim_Animation()`: Animation for Blackjack buttons
- `blackJackNotif_Animation()`: Animation for win/lose notifications in Blackjack

## Implementation

### Animation Properties

Each animation typically configures the following properties:
- **Target values**: End position, opacity, size, etc.
- **Duration**: Length of animation in milliseconds
- **Path type**: How the animation progresses (linear, ease-in, ease-out, etc.)
- **Delay**: Optional delay before starting the animation
- **Callback**: Optional function to call when animation completes

### Example Animation Implementation

```c
void cardPullAnim_Animation(lv_obj_t *TargetObject, int delay)
{
    // Create animation for x-coordinate change
    lv_anim_t PropertyAnimation_0;
    lv_anim_init(&PropertyAnimation_0);
    lv_anim_set_time(&PropertyAnimation_0, 500);
    lv_anim_set_delay(&PropertyAnimation_0, delay);
    lv_anim_set_path_cb(&PropertyAnimation_0, lv_anim_path_overshoot);
    
    // Set start and end values
    lv_anim_set_values(&PropertyAnimation_0, -200, lv_obj_get_x(TargetObject));
    
    // Configure animation to apply to x-coordinate of target object
    lv_anim_set_exec_cb(&PropertyAnimation_0, (lv_anim_exec_xcb_t)lv_obj_set_x);
    lv_anim_set_var(&PropertyAnimation_0, TargetObject);
    
    // Create and start the animation
    lv_anim_start(&PropertyAnimation_0);
    
    // Make target object visible
    lv_obj_set_style_opa(TargetObject, 255, 0);
    lv_obj_clear_flag(TargetObject, LV_OBJ_FLAG_HIDDEN);
}
```

## Game-Specific Animation Usage

### Slots Game

Slot machine animations include:
- Reel spinning animations
- Stopping animations with a bounce effect
- Jackpot celebration animations
- Win notification animations

### Dice Roll Game

Dice animations include:
- Dice appearing animations
- Rolling animations with 3D effect
- Result reveal animations

### Blackjack Game

Card animations include:
- Card dealing (`cardPullAnim_Animation`)
- Card flipping (`cardFlip_Animation`)
- Win/lose notifications (`blackJackNotif_Animation`)

## Animation Callbacks

Some animations use callbacks to trigger subsequent actions, such as:
- `flip_dealer_card_ready_cb()`: Called when dealer card flip animation completes
- `dealer_turn_start_timer_cb()`: Starts dealer's turn after animations complete
- `enable_back_button_cb()`: Re-enables the back button after a delay

## Timing Management

Animations are coordinated using:
1. **Delay parameters**: To stagger animations in sequence
2. **Timers**: To trigger actions after animations complete
3. **Animation duration**: Controlling how long each animation takes

## Integration with Game Logic

Animations are tightly integrated with game logic:
1. Game actions trigger appropriate animations
2. Animations may trigger subsequent game logic through callbacks
3. User input is often disabled during animations to prevent conflicts

---

*For more details on specific animations used in each game, refer to the corresponding documentation files.* 